<div id="store" class="my-3" v-cloak>
  <div class="container">
    <% if(user.isSuperAdmin){ %>
    <div class="row">
      <div class="col-lg-12 d-flex justify-content-end">
        <a class="btn btn-primary" href="/store/product">Add Product</a>
      </div>
    </div>
    <% } %>
    <div class="row">
      <div class="col-xl-12">
        <div class="row">
          <!-- Add a row wrapper -->
          <% products.forEach(data=> { %>
          <div class="col-xl-3 mt-4">
            <!-- Add column classes -->
            <div class="card shadow-dark p-2 d-flex flex-column align-items-center justify-content-center">
              <img src="<%= data.productImage %>" alt="Product Image" width="100" height="100">
              <h3>
                <%= data.productTitle %>
              </h3>
              <p>
                <%= data.productDescription %>
              </p>
              <p>
                <%= data.productFeatures %>
              </p>
              <p class="font-weight-bold">$<%= data.price %>
              </p>
              <% if(user.isSuperAdmin) { %>
              <div class="w-full d-flex flex-column align-items-center justify-content-between gap-2">
                <a class="btn btn-primary text-white" href="/store/product/modify/<%= data.id %>"> Edit Service <i
                    class="fas fa-pencil-alt"></i></a>
                <button class="btn btn-outline-secondary" data-toggle="modal"
                  data-target="#deleteServiceModal<%= data.id %>">Delete Service <i class="fas fa-trash"></i></button>
              </div>
              <% } else { %>
              <a class="btn-primary btn text-white" data-toggle="modal" data-target="#buyModal<%= data.id %>">Buy
                Service <i class="fas fa-cart"></i></a>
              <% } %>
              <div class="modal fade" id="deleteServiceModal<%= data.id %>" tabindex="-1" role="dialog"
                aria-labelledby="deleteModalLabel<%= data.id %>" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="deleteServiceModal<%= data.id %>">Confirm Deletion</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to delete this Service?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                      <a class="btn btn-danger" href="/store/product/delete/<%=data.id%> ">Yes</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% }) %>
          <% if(products.length===0) { %>
          <p class="text-center">There are no Products Available for Sale</p>
          <% } %>
        </div> <!-- Close the row wrapper -->
      </div>

    </div>
  </div>
</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
